{% extends 'base.html' %}
{% block title %}æ™ºèƒ½åŒ¹é…ç»“æœ - å®¤å‹åŒ¹é…ç³»ç»Ÿ{% endblock %}
{% block content %}
<style>
.card-gradient-bar {
  height: 4px;
  border-top-left-radius: 1rem;
  border-top-right-radius: 1rem;
  background: linear-gradient(90deg, #4f8cff 0%, #ffb86c 50%, #6fd6ff 100%);
}
.card-user {
  transition: box-shadow 0.2s;
  box-shadow: 0 2px 12px rgba(79,140,255,0.07);
  border-radius: 1rem;
}
.card-user:hover {
  box-shadow: 0 6px 24px rgba(79,140,255,0.18);
  transform: translateY(-2px) scale(1.02);
}
.badge-major { background: #4f8cff; color: #fff; font-weight: 500; }
.badge-hobby { background: #ff6cff; color: #fff; font-weight: 500; }
.text-label { color: #888; font-size: 0.98em; margin-right: 0.5em; }
.text-main { color: #222; font-weight: 500; }
.text-wechat { color: #1a7f37; font-weight: 600; font-size: 1.1em; }
</style>
<div class="text-center mb-4">
  <h2 class="fw-bold">ğŸ¯ æ™ºèƒ½åŒ¹é…ç»“æœ</h2>
  <p class="text-muted">ä»¥ä¸‹æ˜¯ä¸ä½ ç”Ÿæ´»ä¹ æƒ¯å’Œå…´è¶£æœ€æ¥è¿‘çš„3ä½åŒå­¦</p>
  <form method="get" class="d-flex align-items-center justify-content-center gap-3 mt-2 mb-2">
    <label class="form-check-label mb-0" style="font-size:1.3em;">
      <input type="checkbox" class="form-check-input me-2" name="same_major_only" value="yes" {% if request.args.get('same_major_only') == 'yes' %}checked{% endif %}>
      åªæ˜¾ç¤ºæœ¬ä¸“ä¸šåŒå­¦
    </label>
    <button type="submit" class="btn btn-outline-primary btn-sm mb-0" style="font-size:1.1em;">ç­›é€‰</button>
  </form>
</div>
<div class="row justify-content-center g-4">
  {% for user in matched_users %}
    <div class="col-md-6 col-lg-4">
      <div class="card card-user h-100">
        <div class="card-gradient-bar"></div>
        <div class="card-body">
          <h5 class="card-title mb-2 text-main">{{ user.real_name }}</h5>
          <div class="mb-2"><span class="badge badge-major me-2">ä¸“ä¸š</span>{{ user.major }}</div>
          {% if user.mbti %}
          <div class="mb-2"><span class="badge bg-info text-dark me-2">MBTI</span>{{ user.mbti }}</div>
          {% endif %}
          <div class="mb-2"><span class="text-label">ä½œæ¯</span>{{ user.sleep_time }} - {{ user.wake_time }}</div>
          <div class="mb-2"><span class="text-label">åºŠé“º</span>{% if user.bunk_preference in ['ä¸Šé“º','upper'] %}ä¸Šé“º{% elif user.bunk_preference in ['ä¸‹é“º','lower'] %}ä¸‹é“º{% else %}æ— åå¥½{% endif %}</div>
          <div class="mb-2"><span class="text-label">å«ç”Ÿ</span>{% if user.cleanliness|int >= 5 %}éå¸¸çˆ±å¹²å‡€{% elif user.cleanliness|int >= 3 %}ä¸€èˆ¬{% else %}æ¯”è¾ƒéšæ„{% endif %}ï¼ˆ{{ user.cleanliness }}ï¼‰</div>
          <div class="mb-2"><span class="text-label">å­¦ä¹ </span>{% if user.study_habits %}{{ user.study_habits }}{% else %}æ— ç‰¹åˆ«åå¥½{% endif %}</div>
          <div class="mb-2"><span class="text-label">å‘¨æœ«ç•™æ ¡</span>{{ user.weekend_stay }}</div>
          <div class="mb-2"><span class="text-label">é›†ä½“ç”Ÿæ´»</span>{{ user.group_life }}</div>
          <div class="mb-2"><span class="badge badge-hobby me-2">çˆ±å¥½</span>{{ user.hobbies }}</div>
          <div class="mb-2"><span class="text-label">é¥®é£Ÿç¦å¿Œ</span>{{ user.dietary_restrictions }}</div>
          <div class="mb-2"><span class="text-label">å¾®ä¿¡</span>
            <span class="text-wechat" id="wechat-{{ loop.index }}">{{ user.wechat }}</span>
            <button class="btn btn-outline-secondary btn-sm ms-2" type="button" onclick="navigator.clipboard.writeText('{{ user.wechat }}')">å¤åˆ¶</button>
          </div>
        </div>
      </div>
    </div>
  {% else %}
    <div class="col-12 text-center text-muted">æš‚æ— åŒ¹é…ç»“æœ</div>
  {% endfor %}
</div>
<div class="text-center mt-4">
  <a href="/match" class="btn btn-primary btn-lg">é‡æ–°åŒ¹é…</a>
  <a href="/" class="btn btn-outline-secondary btn-lg ms-2">è¿”å›é¦–é¡µ</a>
</div>
{% endblock %}
